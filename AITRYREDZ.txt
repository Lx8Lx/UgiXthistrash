local Players = game:GetService("Players")
local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

local Library = {}

-- Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ UICorner Ø¨Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ©
local function CreateUICorner(parent, radius)
	local corner = Instance.new("UICorner", parent)
	corner.CornerRadius = UDim.new(0, radius or 10)
	return corner
end

-- Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ù†Ø§ÙØ°Ø© Ø±Ø¦ÙŠØ³ÙŠØ©
function MakeWindow(config)
	local screenGui = Instance.new("ScreenGui", PlayerGui)
	screenGui.Name = "UgiX_UI"
	screenGui.ResetOnSpawn = false
	screenGui.Enabled = true

	local mainFrame = Instance.new("Frame", screenGui)
	mainFrame.Name = "MainFrame"
	mainFrame.Size = UDim2.new(0, 650, 0, 420)
	mainFrame.Position = UDim2.new(0.5, -325, 0.5, -210)
	mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	mainFrame.Active = true
	mainFrame.Draggable = true
	CreateUICorner(mainFrame, 20)

	-- Title Bar
	local titleBar = Instance.new("Frame", mainFrame)
	titleBar.Name = "TitleBar"
	titleBar.Size = UDim2.new(1, 0, 0, 50)
	titleBar.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
	CreateUICorner(titleBar, 20)

	local titleLabel = Instance.new("TextLabel", titleBar)
	titleLabel.Name = "TitleLabel"
	titleLabel.Size = UDim2.new(0.7, 0, 1, 0)
	titleLabel.Position = UDim2.new(0, 20, 0, 0)
	titleLabel.BackgroundTransparency = 1
	titleLabel.TextColor3 = Color3.new(1, 1, 1)
	titleLabel.Font = Enum.Font.GothamBold
	titleLabel.TextScaled = true
	titleLabel.TextXAlignment = Enum.TextXAlignment.Left
	titleLabel.Text = config.Hub and config.Hub.Title or "UgiX Ø§Ù„Ù…Ø·ÙˆØ±"

	local animationLabel = Instance.new("TextLabel", titleBar)
	animationLabel.Name = "AnimationLabel"
	animationLabel.Size = UDim2.new(0.3, -20, 1, 0)
	animationLabel.Position = UDim2.new(0.7, 0, 0, 0)
	animationLabel.BackgroundTransparency = 1
	animationLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
	animationLabel.Font = Enum.Font.Gotham
	animationLabel.TextScaled = true
	animationLabel.Text = config.Hub and config.Hub.Animation or "Ø§Ù‡Ù„Ø§ Ø¨Ùƒ ğŸŒ¹"
	animationLabel.TextXAlignment = Enum.TextXAlignment.Right

	-- Close Button (X)
	local closeButton = Instance.new("ImageButton", titleBar)
	closeButton.Name = "CloseButton"
	closeButton.Size = UDim2.new(0, 40, 0, 40)
	closeButton.Position = UDim2.new(1, -50, 0, 5)
	closeButton.BackgroundColor3 = Color3.fromRGB(180, 40, 40)
	closeButton.Image = "rbxassetid://76022761932440" -- ØµÙˆØ±Ø© Ø§Ù„ØºÙ„Ù‚
	closeButton.ScaleType = Enum.ScaleType.Fit
	CreateUICorner(closeButton, 12)

	-- Minimize Button (ØµÙˆØ±Ø© Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø¶ØºØ·)
	local minimizeButton = Instance.new("ImageButton", titleBar)
	minimizeButton.Name = "MinimizeButton"
	minimizeButton.Size = UDim2.new(0, 40, 0, 40)
	minimizeButton.Position = UDim2.new(1, -100, 0, 5)
	minimizeButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	minimizeButton.Image = "rbxassetid://116612960959791" -- ØµÙˆØ±Ø© Ø§Ù„ØªØµØºÙŠØ±
	minimizeButton.ScaleType = Enum.ScaleType.Fit
	CreateUICorner(minimizeButton, 12)

	-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
	local tabsPanel = Instance.new("Frame", mainFrame)
	tabsPanel.Name = "TabsPanel"
	tabsPanel.Size = UDim2.new(0, 140, 1, -50)
	tabsPanel.Position = UDim2.new(0, 0, 0, 50)
	tabsPanel.BackgroundColor3 = Color3.fromRGB(55, 55, 55)
	CreateUICorner(tabsPanel, 20)

	local contentPanel = Instance.new("Frame", mainFrame)
	contentPanel.Name = "ContentPanel"
	contentPanel.Size = UDim2.new(1, -140, 1, -50)
	contentPanel.Position = UDim2.new(0, 140, 0, 50)
	contentPanel.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
	CreateUICorner(contentPanel, 20)

	Library.ScreenGui = screenGui
	Library.MainFrame = mainFrame
	Library.TabsPanel = tabsPanel
	Library.ContentPanel = contentPanel
	Library.Tabs = {}
	Library.ContentFrames = {}

	-- ØªÙØ¹ÙŠÙ„ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
	closeButton.MouseButton1Click:Connect(function()
		screenGui.Enabled = false
	end)

	-- ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ØªØµØºÙŠØ± (Minimize)
	minimizeButton.MouseButton1Click:Connect(function()
		screenGui.Enabled = false
		if not Library.OpenButton then
			local openBtn = Instance.new("TextButton", PlayerGui)
			openBtn.Name = "OpenButton"
			openBtn.Size = UDim2.new(0, 80, 0, 30)
			openBtn.Position = UDim2.new(0, 10, 0.5, -15)
			openBtn.Text = "UgiX"
			openBtn.Font = Enum.Font.GothamBold
			openBtn.TextScaled = true
			openBtn.TextColor3 = Color3.new(1, 1, 1)
			openBtn.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
			CreateUICorner(openBtn, 15)
			openBtn.Active = true
			openBtn.Draggable = true

			openBtn.MouseButton1Click:Connect(function()
				screenGui.Enabled = true
				openBtn:Destroy()
				Library.OpenButton = nil
			end)

			Library.OpenButton = openBtn
		else
			Library.OpenButton.Visible = true
		end
	end)

	return Library
end

-- Ø§Ù†Ø´Ø§Ø¡ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
function MakeTab(config)
	local tabName = config.Name or "Tab"
	local tabsPanel = Library.TabsPanel
	local contentPanel = Library.ContentPanel

	-- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
	local tabButton = Instance.new("TextButton", tabsPanel)
	tabButton.Name = "TabButton_"..tabName
	tabButton.Size = UDim2.new(1, -20, 0, 50)
	tabButton.Position = UDim2.new(0, 10, 0, (#tabsPanel:GetChildren()-1)*60)
	tabButton.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
	tabButton.TextColor3 = Color3.new(1,1,1)
	tabButton.Font = Enum.Font.GothamBold
	tabButton.TextScaled = true
	tabButton.Text = tabName
	CreateUICorner(tabButton, 15)

	-- Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø·Ø§Ø± Ø§Ù„Ù…Ø­ØªÙˆÙ‰
	local contentFrame = Instance.new("ScrollingFrame", contentPanel)
	contentFrame.Name = "Content_"..tabName
	contentFrame.Size = UDim2.new(1, -20, 1, -20)
	contentFrame.Position = UDim2.new(0, 10, 0, 10)
	contentFrame.CanvasSize = UDim2.new(0, 0, 5, 0)
	contentFrame.ScrollBarThickness = 8
	contentFrame.BackgroundColor3 = Color3.fromRGB(85, 85, 85)
	CreateUICorner(contentFrame, 15)
	contentFrame.Visible = false
	contentFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y

	-- Ø§Ø¸Ù‡Ø§Ø± Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
	if #Library.Tabs == 0 then
		contentFrame.Visible = true
		tabButton.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
	end

	-- Ø­Ø¯Ø« ØªØºÙŠÙŠØ± Ø§Ù„ØªØ¨ÙˆÙŠØ¨
	tabButton.MouseButton1Click:Connect(function()
		for _, tab in pairs(Library.ContentFrames) do
			tab.Visible = false
		end
		for _, btn in pairs(Library.Tabs) do
			btn.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
		end
		contentFrame.Visible = true
		tabButton.BackgroundColor3 = Color3.fromRGB(200, 30, 30)
	end)

	table.insert(Library.Tabs, tabButton)
	Library.ContentFrames[tabName] = contentFrame
	return contentFrame
end

-- Ø²Ø±
function AddButton(parent, config)
	local buttons = parent:GetChildren()
	local yOffset = 10 + (#buttons * 55)
	local btn = Instance.new("TextButton", parent)
	btn.Size = UDim2.new(0.95, 0, 0, 50)
	btn.Position = UDim2.new(0, 10, 0, yOffset)
	btn.BackgroundColor3 = Color3.fromRGB(139, 0, 0)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.GothamBold
	btn.TextScaled = true
	btn.Text = config.Name or "Button"
	CreateUICorner(btn, 15)
	btn.MouseButton1Click:Connect(config.Callback or function() end)
	return btn
end

-- ÙÙ‚Ø±Ø© Ù†ØµÙŠØ©
function AddParagraph(parent, texts)
	local yPos = 10 + (#parent:GetChildren() * 55)
	local label = Instance.new("TextLabel", parent)
	label.Size = UDim2.new(0.95, 0, 0, 65)
	label.Position = UDim2.new(0, 10, 0, yPos)
	label.BackgroundTransparency = 1
	label.TextColor3 = Color3.new(1,1,1)
	label.Font = Enum.Font.GothamBold
	label.TextScaled = true
	label.TextWrapped = true
	label.Text = table.concat(texts, "\n") or ""
	return label
end

-- Ø²Ø± Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
function AddDiscord(parent, config)
	local btn = Instance.new("TextButton", parent)
	btn.Size = UDim2.new(0.95, 0, 0, 50)
	btn.Position = UDim2.new(0, 10, 0, 10 + (#parent:GetChildren() * 55))
	btn.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
	btn.TextColor3 = Color3.new(1, 1, 1)
	btn.Font = Enum.Font.GothamBold
	btn.TextScaled = true
	btn.Text = config.DiscordTitle or "Discord"
	CreateUICorner(btn, 15)

	btn.MouseButton1Click:Connect(function()
		if setclipboard then
			setclipboard(config.DiscordLink or "")
		end
	end)

	if config.DiscordIcon then
		local icon = Instance.new("ImageLabel", btn)
		icon.Size = UDim2.new(0, 30, 0, 30)
		icon.Position = UDim2.new(1, -35, 0, 10)
		icon.BackgroundTransparency = 1
		icon.Image = config.DiscordIcon
		icon.ScaleType = Enum.ScaleType.Fit
		CreateUICorner(icon, 10)
	end

	return btn
end

-- Ø§Ø¶Ø§ÙØ© ØµÙˆØ±Ø©
function AddImageLabel(parent, config)
	local imgLabel = Instance.new("ImageLabel", parent)
	imgLabel.Size = UDim2.new(0.95, 0, 0, 160)
	imgLabel.Position = UDim2.new(0, 10, 0, 10 + (#parent:GetChildren() * 165))
	imgLabel.BackgroundTransparency = 1
	imgLabel.Image = config.Image or ""
	imgLabel.ScaleType = Enum.ScaleType.Fit
	CreateUICorner(imgLabel, 20)
	return imgLabel
end

-- Ø¹Ù†ÙˆØ§Ù† Ù‚Ø³Ù…
function AddSection(parent, texts)
	local yPos = 10 + (#parent:GetChildren() * 55)
	local label = Instance.new("TextLabel", parent)
	label.Size = UDim2.new(0.95, 0, 0, 40)
	label.Position = UDim2.new(0, 10, 0, yPos)
	label.BackgroundTransparency = 1
	label.TextColor3 = Color3.new(1, 1, 1)
	label.Font = Enum.Font.GothamBold
	label.TextScaled = true
	label.TextXAlignment = Enum.TextXAlignment.Left
	label.Text = texts[1] or ""
	return label
end

-- Ø²Ø± ØªØµØºÙŠØ± Ù…Ø¹ ØµÙˆØ±Ø© ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ®ØµÙŠØµ
function MinimizeButton(config)
	if not Library.MainFrame then return end

	local btn = Instance.new("ImageButton", Library.MainFrame)
	btn.Name = "MinimizeBtn_"..tostring(math.random(1,100000))
	btn.Size = UDim2.new(0, config.Size[1], 0, config.Size[2])
	btn.Position = UDim2.new(1, -config.Size[1] - 15, 0, 60 + (#Library.MainFrame:GetChildren() * 50))
	btn.BackgroundColor3 = config.Color or Color3.fromRGB(10,10,10)
	btn.Image = config.Image or ""
	btn.ScaleType = Enum.ScaleType.Fit
	CreateUICorner(btn, config.Corner and 15 or 0)

	if config.Stroke then
		local stroke = Instance.new("UIStroke", btn)
		stroke.Color = config.StrokeColor or Color3.fromRGB(0,0,0)
		stroke.Thickness = 2
	end

	btn.MouseButton1Click:Connect(function()
		if Library.MainFrame.Visible then
			Library.MainFrame.Visible = false
			if Library.OpenButton then
				Library.OpenButton.Visible = true
			else
				-- Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± ÙØªØ­ Ø¬Ø¯ÙŠØ¯ Ø¥Ø°Ø§ Ù…Ø§ÙÙŠÙ‡
				local openBtn = Instance.new("TextButton", PlayerGui)
				openBtn.Name = "OpenButton"
				openBtn.Size = UDim2.new(0, 80, 0, 30)
				openBtn.Position = UDim2.new(
