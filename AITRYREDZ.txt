local Library = {}

local ScreenGui = Instance.new("ScreenGui", game:GetService("CoreGui"))
ScreenGui.Name = "UgiX_Library"

local MainFrame = Instance.new("Frame", ScreenGui)
MainFrame.Size = UDim2.new(0, 500, 0, 270)
MainFrame.Position = UDim2.new(0.5, -250, 0.5, -135)
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
MainFrame.Active = true
MainFrame.Draggable = true

local UICorner = Instance.new("UICorner", MainFrame)
UICorner.CornerRadius = UDim.new(0, 8)

local CloseButton = Instance.new("TextButton", MainFrame)
CloseButton.Size = UDim2.new(0, 40, 0, 40)
CloseButton.Position = UDim2.new(1, -45, 0, 5)
CloseButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
CloseButton.Text = "Ã—"
CloseButton.TextScaled = true
Instance.new("UICorner", CloseButton)

CloseButton.MouseButton1Click:Connect(function()
	MainFrame.Visible = false
end)

local TabsFrame = Instance.new("Frame", MainFrame)
TabsFrame.Size = UDim2.new(0, 130, 1, -50)
TabsFrame.Position = UDim2.new(0, 0, 0, 50)
TabsFrame.BackgroundTransparency = 1

local UIList = Instance.new("UIListLayout", TabsFrame)
UIList.Padding = UDim.new(0, 5)

local ContentFrame = Instance.new("Frame", MainFrame)
ContentFrame.Size = UDim2.new(1, -140, 1, -60)
ContentFrame.Position = UDim2.new(0, 140, 0, 50)
ContentFrame.BackgroundTransparency = 1

local Tabs = {}

function Library.MakeWindow(Config)
	if Config.Hub and Config.Hub.Animation then
		local Anim = Instance.new("TextLabel", MainFrame)
		Anim.Size = UDim2.new(1, 0, 0, 30)
		Anim.BackgroundTransparency = 1
		Anim.Text = Config.Hub.Animation
		Anim.TextColor3 = Color3.fromRGB(200, 200, 200)
		Anim.TextScaled = true
		task.spawn(function()
			task.wait(1.5)
			Anim:Destroy()
		end)
	end
end

function Library.MakeTab(Config)
	local TabButton = Instance.new("TextButton", TabsFrame)
	TabButton.Size = UDim2.new(1, 0, 0, 30)
	TabButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	TabButton.Text = Config.Name
	Instance.new("UICorner", TabButton)

	local TabContent = Instance.new("ScrollingFrame", ContentFrame)
	TabContent.Size = UDim2.new(1, 0, 1, 0)
	TabContent.Visible = #Tabs == 0
	TabContent.ScrollBarThickness = 3
	TabContent.BackgroundTransparency = 1
	local Layout = Instance.new("UIListLayout", TabContent)
	Layout.Padding = UDim.new(0, 5)

	TabButton.MouseButton1Click:Connect(function()
		for _, v in ipairs(ContentFrame:GetChildren()) do
			if v:IsA("ScrollingFrame") then
				v.Visible = false
			end
		end
		TabContent.Visible = true
	end)

	table.insert(Tabs, TabContent)
	return TabContent
end

function Library.AddButton(Tab, Config)
	local Btn = Instance.new("TextButton", Tab)
	Btn.Size = UDim2.new(1, -10, 0, 30)
	Btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	Btn.Text = Config.Name
	Instance.new("UICorner", Btn)

	Btn.MouseButton1Click:Connect(function()
		pcall(Config.Callback)
	end)
end

function Library.AddParagraph(Tab, Texts)
	local Label = Instance.new("TextLabel", Tab)
	Label.Size = UDim2.new(1, -10, 0, 60)
	Label.BackgroundTransparency = 1
	Label.TextColor3 = Color3.fromRGB(200, 200, 200)
	Label.Text = table.concat(Texts, "\n")
	Label.TextWrapped = true
end

function Library.AddDiscord(Tab, Config)
	local Btn = Instance.new("TextButton", Tab)
	Btn.Size = UDim2.new(1, -10, 0, 30)
	Btn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	Btn.Text = Config.DiscordTitle
	Instance.new("UICorner", Btn)

	Btn.MouseButton1Click:Connect(function()
		setclipboard(Config.DiscordLink)
	end)
end

function Library.AddImageLabel(Tab, Config)
	local Img = Instance.new("ImageLabel", Tab)
	Img.Size = UDim2.new(0, 100, 0, 100)
	Img.Image = Config.Image
	Img.BackgroundTransparency = 1
end

function Library.MinimizeButton(Config)
	local Btn = Instance.new("ImageButton", ScreenGui)
	Btn.Size = UDim2.new(0, Config.Size[1], 0, Config.Size[2])
	Btn.Position = UDim2.new(0.1, 0, 0.1, 0)
	Btn.BackgroundColor3 = Config.Color
	Btn.Image = Config.Image
	Btn.Draggable = true
	if Config.Corner then Instance.new("UICorner", Btn) end
	if Config.Stroke then
		local stroke = Instance.new("UIStroke", Btn)
		stroke.Color = Config.StrokeColor
	end

	local Min = false
	Btn.MouseButton1Click:Connect(function()
		Min = not Min
		MainFrame.Visible = not Min
	end)
end

return Library
