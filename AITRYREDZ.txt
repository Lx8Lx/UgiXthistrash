-- UgiX UI Library (محدثة ومطورة)
local Configs_HUB = { 
  Cor_Hub = Color3.fromRGB(15, 15, 15), 
  Cor_Options = Color3.fromRGB(20, 20, 20), 
  Cor_Stroke = Color3.fromRGB(92, 64, 51),
  Cor_Text = Color3.fromRGB(180, 180, 180), 
  Cor_DarkText = Color3.fromRGB(240, 240, 240), 
  Corner_Radius = UDim.new(0, 6), 
  Text_Font = Enum.Font.FredokaOne 
}

local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

local function Create(instance, parent, props)
  local new = Instance.new(instance, parent)
  if props then
    table.foreach(props, function(prop, value)
      new[prop] = value
    end)
  end
  return new
end

local function SetProps(instance, props)
  if instance and props then
    table.foreach(props, function(prop, value)
      instance[prop] = value
    end)
  end
  return instance
end

local function Corner(parent, props)
  local new = Create("UICorner", parent)
  new.CornerRadius = Configs_HUB.Corner_Radius
  if props then
    SetProps(new, props)
  end
  return new
end

local function Stroke(parent, props)
  local new = Create("UIStroke", parent)
  new.Color = Configs_HUB.Cor_Stroke
  new.ApplyStrokeMode = "Border"
  if props then
    SetProps(new, props)
  end
  return new
end

local function CreateTween(instance, prop, value, time, tweenWait)
  local tween = TweenService:Create(instance,
  TweenInfo.new(time, Enum.EasingStyle.Linear),
  {[prop] = value})
  tween:Play()
  if tweenWait then
    tween.Completed:Wait()
  end
end

local function TextSetColor(instance)
  instance.MouseEnter:Connect(function()
    CreateTween(instance, "TextColor3", Color3.fromRGB(30, 140, 200), 0.4, true)
  end)
  instance.MouseLeave:Connect(function()
    CreateTween(instance, "TextColor3", Configs_HUB.Cor_Text, 0.4, false)
  end)
end

local ScreenGui = Create("ScreenGui", CoreGui, {
  Name = "UgiX_UI"
})

ScreenFind = CoreGui:FindFirstChild(ScreenGui.Name)
if ScreenFind and ScreenFind ~= ScreenGui then
  ScreenFind:Destroy()
end

function DestroyScript()
  ScreenGui:Destroy()
end

local Menu_Notifi = Create("Frame", ScreenGui, {
  Size = UDim2.new(0, 300, 1, 0),
  Position = UDim2.new(1, 0, 0, 0),
  AnchorPoint = Vector2.new(1, 0),
  BackgroundTransparency = 1
})

local Padding = Create("UIPadding", Menu_Notifi, {
  PaddingLeft = UDim.new(0, 25),
  PaddingTop = UDim.new(0, 25),
  PaddingBottom = UDim.new(0, 50)
})

local ListLayout = Create("UIListLayout", Menu_Notifi, {
  Padding = UDim.new(0, 15),
  VerticalAlignment = "Bottom"
})

function MakeNotifi(Configs)
  local Title = Configs.Title or "UgiX UI"
  local text = Configs.Text or "Notificação"
  local timewait = Configs.Time or 5
  
  local Frame1 = Create("Frame", Menu_Notifi, {
    Size = UDim2.new(2, 0, 0, 0),
    BackgroundTransparency = 1,
    AutomaticSize = "Y",
    Name = "Title"
  })
  
  local Frame2 = Create("Frame", Frame1, {
    Size = UDim2.new(0, Menu_Notifi.Size.X.Offset - 50, 0, 0),
    BackgroundColor3 = Configs_HUB.Cor_Hub,
    Position = UDim2.new(0, Menu_Notifi.Size.X.Offset, 0, 0),
    AutomaticSize = "Y"
  })Corner(Frame2)
  
  local TextLabel = Create("TextLabel", Frame2, {
    Size = UDim2.new(1, 0, 0, 25),
    Font = Configs_HUB.Text_Font,
    BackgroundTransparency = 1,
    Text = Title,
    TextSize = 20,
    Position = UDim2.new(0, 20, 0, 5),
    TextXAlignment = "Left",
    TextColor3 = Configs_HUB.Cor_Text
  })
  
  local TextButton = Create("TextButton", Frame2, {
    Text = "X",
    Font = Configs_HUB.Text_Font,
    TextSize = 20,
    BackgroundTransparency = 1,
    TextColor3 = Color3.fromRGB(200, 200, 200),
    Position = UDim2.new(1, -5, 0, 5),
    AnchorPoint = Vector2.new(1, 0),
    Size = UDim2.new(0, 25, 0, 25)
  })
  
  local TextLabel = Create("TextLabel", Frame2, {
    Size = UDim2.new(1, -30, 0, 0),
    Position = UDim2.new(0, 20, 0, TextButton.Size.Y.Offset + 10),
    TextSize = 15,
    TextColor3 = Configs_HUB.Cor_DarkText,
    TextXAlignment = "Left",
    TextYAlignment = "Top",
    AutomaticSize = "Y",
    Text = text,
    Font = Configs_HUB.Text_Font,
    BackgroundTransparency = 1,
    AutomaticSize = Enum.AutomaticSize.Y,
    TextWrapped = true
  })
  
  local FrameSize = Create("Frame", Frame2, {
    Size = UDim2.new(1, 0, 0, 2),
    BackgroundColor3 = Configs_HUB.Cor_Stroke,
    Position = UDim2.new(0, 2, 0, 30),
    BorderSizePixel = 0
  })Corner(FrameSize)Create("Frame", Frame2, {
    Size = UDim2.new(0, 0, 0, 5),
    Position = UDim2.new(0, 0, 1, 5),
    BackgroundTransparency = 1
  })
  
  task.spawn(function()
    CreateTween(FrameSize, "Size", UDim2.new(0, 0, 0, 2), timewait, true)
  end)
  
  TextButton.MouseButton1Click:Connect(function()
    CreateTween(Frame2, "Position", UDim2.new(0, -20, 0, 0), 0.1, true)
    CreateTween(Frame2, "Position", UDim2.new(0, Menu_Notifi.Size.X.Offset, 0, 0), 0.5, true)
    Frame1:Destroy()
  end)
  
  task.spawn(function()
    CreateTween(Frame2, "Position", UDim2.new(0, -20, 0, 0), 0.5, true)
    CreateTween(Frame2, "Position", UDim2.new(), 0.1, true)task.wait(timewait)
    if Frame2 then
      CreateTween(Frame2, "Position", UDim2.new(0, -20, 0, 0), 0.1, true)
      CreateTween(Frame2, "Position", UDim2.new(0, Menu_Notifi.Size.X.Offset, 0, 0), 0.5, true)
      Frame1:Destroy()
    end
  end)
end

function MakeWindow(Configs)
  local title = Configs.Hub.Title or "UgiX UI"
  local Anim_Title = Configs.Hub.Animation or "by UgiX"
  
  local KeySystem = Configs.Key.KeySystem or false
  local KeyTitle = Configs.Key.Title or "Key System"
  local KeyDescription = Configs.Key.Description or ".-."
  local KeyKey = Configs.Key.Keys or {"123", "321"}
  local KeyLink = Configs.Key.KeyLink or ""
  local KeyNotifications = Configs.Key.Notifi.Notifications or true
  local KeyNotSuccess = Configs.Key.Notifi.Incorrectkey or "The key is incorrect"
  local KeySuccess = Configs.Key.Notifi.CorrectKey or "Running the Script..."
  local KeyCopyKeyLink = Configs.Key.Notifi.CopyKeyLink or "Copied to Clipboard"
  
  if KeySystem then
    local KeyMenu = Create("Frame", ScreenGui, {
      Size = UDim2.new(0, 400, 0, 220),
      Position = UDim2.new(0.5, 0, 0.5, 0),
      BackgroundColor3 = Configs_HUB.Cor_Hub,
      AnchorPoint = Vector2.new(0.5, 0.5),
      Active = true,
      Draggable = true
    })Corner(KeyMenu)
    
    local CloseButton = Create("TextButton", KeyMenu, {
      Size = UDim2.new(0, 30, 0, 30),
      Position = UDim2.new(1, -10, 0, 5),
      AnchorPoint = Vector2.new(1, 0),
      Text = "X",
      Font = Enum.Font.FredokaOne,
      TextScaled = true,
      TextColor3 = Color3.fromRGB(240, 0, 0),
      BackgroundTransparency = 1,
    })Corner(CloseButton)
    
    local Title = Create("TextLabel", KeyMenu, {
      Size = UDim2.new(1, -80, 0, 20),
      Position = UDim2.new(0, 20, 0, 5),
      Text = KeyTitle,
      Font = Configs_HUB.Text_Font,
      TextScaled = true,
      TextColor3 = Configs_HUB.Cor_Text,
      TextXAlignment = "Left",
      BackgroundTransparency = 1
    })
    
    local Description = Create("TextLabel", KeyMenu, {
      Size = UDim2.new(1, -80, 0, 0),
      Text = KeyDescription,
      TextSize = 17,
      TextColor3 = Configs_HUB.Cor_DarkText,
      Font = Configs_HUB.Text_Font,
      Position = UDim2.new(0, 20, 0, 25),
      TextXAlignment = "Left",
      AutomaticSize = "Y",
      TextYAlignment = "Top",
      BackgroundTransparency = 1
    })
    
    local ConfirmButton = Create("TextButton", KeyMenu, {
      Text = "Confirm",
      Font = Configs_HUB.Text_Font,
      TextSize = 20,
      TextColor3 = Configs_HUB.Cor_Text,
      Size = UDim2.new(0, 150, 0, 40),
      AnchorPoint = Vector2.new(1, 0),
      Position = UDim2.new(1, -35, 0, 140),
      BackgroundColor3 = Configs_HUB.Cor_Options
    })Corner(ConfirmButton)
    
    local GetKeyLink = Create("TextButton", KeyMenu, {
      Text = "Get Key Link",
      Font = Configs_HUB.Text_Font,
      TextSize = 20,
      TextColor3 = Configs_HUB.Cor_Text,
      Size = UDim2.new(0, 150, 0, 40),
      Position = UDim2.new(0, 35, 0, 140),
      BackgroundColor3 = Configs_HUB.Cor_Options
    })Corner(GetKeyLink)
    
    local TextBox = Create("TextBox", KeyMenu, {
      Size = UDim2.new(1, -70, 0, 40),
      Position = UDim2.new(0, 35, 0, 90),
      BackgroundColor3 = Configs_HUB.Cor_Options,
      PlaceholderText = "Put the Key here",
      Text = "",
      TextColor3 = Configs_HUB.Cor_Text,
      Font = Configs_HUB.Text_Font,
      TextSize = 25
    })Corner(TextBox)
    
    local KeyVerify = false
    CloseButton.MouseButton1Click:Connect(function()
      local UIScale = Create("UIScale", ScreenGui)
      CreateTween(UIScale, "Scale", 0, 0.20, true)
      ScreenGui:Destroy()
    end)
    
    ConfirmButton.MouseButton1Click:Connect(function()
      for _,v in pairs(KeyKey) do
        if TextBox.Text == v then
          KeyVerify = true
        end
      end
      if KeyNotifications and not KeyVerify then
        MakeNotifi({
          Title = KeyTitle,
          Text = KeyNotSuccess,
          Time = 5
        })
      elseif KeyNotifications then
        MakeNotifi({
          Title = KeyTitle,
          Text = KeySuccess,
          Time = 5
        })
      end
    end)
    
    GetKeyLink.MouseButton1Click:Connect(function()
      if KeyNotifications then
        setclipboard(KeyLink)
        MakeNotifi({
          Title = KeyTitle,
          Text = KeyCopyKeyLink,
          Time = 5
        })
      end
    end)
    
    repeat task.wait()
    until KeyVerify
    local UIScale = Create("UIScale", KeyMenu)
    CreateTween(UIScale, "Scale", 0, 0.40, true)
    KeyMenu:Destroy()
  end
  
  local Menu = Create("Frame", ScreenGui, {
    BackgroundColor3 = Configs_HUB.Cor_Hub,
    Position = UDim2.new(0.5, -600/2, 0.5, -380/2),
    Size = UDim2.new(0, 600, 0, 380),
    Active = true,
    Draggable = true
  })Corner(Menu)Stroke(Menu)
  
  local TopBar = Create("Frame", Menu, {
    BackgroundColor3 = Configs_HUB.Cor_Options,
    Size = UDim2.new(1, 0, 0, 30),
    Position = UDim2.new(0, 0, 0, 0)
  })Corner(TopBar)Stroke(TopBar)
  
  local Title = Create("TextLabel", TopBar, {
    Size = UDim2.new(1, -90, 1, 0),
    Position = UDim2.new(0, 10, 0, 0),
    TextColor3 = Configs_HUB.Cor_DarkText,
    Font = Configs_HUB.Text_Font,
    TextXAlignment = "Left",
    Text = title,
    TextSize = 20,
    BackgroundTransparency = 1
  })
  
  local Close_Button = Create("TextButton", TopBar, {
    Text = "×",
    TextColor3 = Color3.fromRGB(240, 60, 60),
    Size = UDim2.new(0, 40, 1, 0),
    Position = UDim2.new(1, -45, 0, 0),
    BackgroundTransparency = 1,
    Font = Configs_HUB.Text_Font,
    TextSize = 25
  })
  
  Close_Button.MouseButton1Click:Connect(function()
    local UIScale = Create("UIScale", ScreenGui)
    CreateTween(UIScale, "Scale", 0, 0.20, true)
    ScreenGui:Destroy()
  end)
  
  local MinBtn = Create("ImageButton", TopBar, {
    Image = "rbxassetid://116612960959791",
    Size = UDim2.new(0, 35, 0, 25),
    Position = UDim2.new(1, -90, 0, 2),
    BackgroundColor3 = Configs_HUB.Cor_Options,
    AutoButtonColor = true
  })Corner(MinBtn)Stroke(MinBtn)
  
  local minimized = false
  MinBtn.MouseButton1Click:Connect(function()
    minimized = not minimized
    if minimized then
      CreateTween(Menu, "Size", UDim2.new(0, 0, 0, 0), 0.25, false)
    else
      CreateTween(Menu, "Size", UDim2.new(0, 600, 0, 380), 0.25, false)
    end
    task.wait(0.3)
    Menu.Visible = not minimized
  end)
  
  local TabsContainer = Create("Frame", Menu, {
    Size = UDim2.new(0, 140, 1, -40),
    Position = UDim2.new(0, 10, 0, 35),
    BackgroundColor3 = Configs_HUB.Cor_Options,
  })Corner(TabsContainer)Stroke(TabsContainer)
  
  local TabsLayout = Create("UIListLayout", TabsContainer)
  TabsLayout.SortOrder = Enum.SortOrder.LayoutOrder
  TabsLayout.Padding = UDim.new(0, 5)
  
  local ContentContainer = Create("Frame", Menu, {
    Size = UDim2.new(1, -160, 1, -40),
    Position = UDim2.new(0, 160, 0, 35),
    BackgroundColor3 = Configs_HUB.Cor_Options,
  })Corner(ContentContainer)Stroke(ContentContainer)
  
  local tabs = {}
  local contents = {}
  
  local function ClearContents()
    for _, frame in pairs(contents) do
      frame.Visible = false
    end
  end
  
  local function ActivateTab(index)
    for i, tabBtn in ipairs(tabs) do
      if i == index then
        tabBtn.BackgroundColor3 = Configs_HUB.Cor_Stroke
        tabBtn.TextColor3 = Configs_HUB.Cor_DarkText
        contents[i].Visible = true
      else
        tabBtn.BackgroundColor3 = Configs_HUB.Cor_Options
        tabBtn.TextColor3 = Configs_HUB.Cor_Text
        contents[i].Visible = false
      end
    end
  end
  
  local function MakeTab(name)
    local tabBtn = Create("TextButton", TabsContainer, {
      Text = name,
      Font = Configs_HUB.Text_Font,
      TextSize = 18,
      TextColor3 = Configs_HUB.Cor_Text,
      BackgroundColor3 = Configs_HUB.Cor_Options,
      Size = UDim2.new(1, 0, 0, 40),
      AutoButtonColor = true
    })Corner(tabBtn)Stroke(tabBtn)
    
    local contentFrame = Create("ScrollingFrame", ContentContainer, {
      Size = UDim2.new(1, -10, 1, -10),
      Position = UDim2.new(0, 5, 0, 5),
      BackgroundTransparency = 1,
      ScrollBarThickness = 6,
      CanvasSize = UDim2.new(0, 0, 0, 0),
      AutomaticCanvasSize = Enum.AutomaticSize.Y,
      VerticalScrollBarInset = Enum.ScrollBarInset.Always,
      Visible = false
    })
    
    local layout = Create("UIListLayout", contentFrame)
    layout.Padding = UDim.new(0, 8)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    
    table.insert(tabs, tabBtn)
    table.insert(contents, contentFrame)
    
    tabBtn.MouseButton1Click:Connect(function()
      ActivateTab(#tabs)
    end)
    
    if #tabs == 1 then
      ActivateTab(1)
    end
    
    return contentFrame
  end
  
  -- بقية الدوال (AddButton, AddToggle, etc.) تبقى كما هي مع تعديل التنسيق فقط
  
  -- مثال على دالة AddButton المعدلة:
  function AddButton(parent, Configs)
    local ButtonName = Configs.Name or "Button!!"
    local Callback = Configs.Callback or function() end
    
    local TextButton = Create("TextButton", parent, {
      Size = UDim2.new(1, 0, 0, 45),
      BackgroundColor3 = Configs_HUB.Cor_Options,
      Name = "Frame",
      Text = ButtonName,
      Font = Configs_HUB.Text_Font,
      TextSize = 18,
      TextColor3 = Configs_HUB.Cor_DarkText,
      AutoButtonColor = true
    })Corner(TextButton)Stroke(TextButton)
    
    TextButton.MouseButton1Click:Connect(function()
      Callback("Click!!")
    end)
    
    return TextButton
  end

  -- إرجاع الدوال الرئيسية
  return {
    MakeTab = MakeTab,
    AddButton = AddButton,
    -- أضف بقية الدوال هنا بنفس الطريقة
  }
end

return {
  MakeWindow = MakeWindow
}
